<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" id="viewport" content="width=device-width, initial-scale=1.0">
  <title><%= name %></title>
  <link rel="stylesheet" href="/css/pic4ward.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.4/raphael-min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/3.1.8/imagesloaded.pkgd.js"></script>
  <script id="util" src="/js/util.js"></script>
  <script type="text/javascript" language="JavaScript">
    //history.navigationMode = 'compatible';
    var dataStore;
    var clickablesArray;
    $('html').css('background-color', '#<%-bColor%>');
    var resizeCallback = function() { 
      set_body_height();
      setup_canvas(clickablesArray); 
      clickablesArray = draw_clickables(dataStore);
    }
    // After DOM is constructed
    $(document).ready(function() {
      dataStore = <%-newClickables%>;
      $(window).bind('resize', resizeCallback);
      // Set image 'src'
      var relURL = $(location).attr('host');
      var imageSrc = '<%= url %>';
      $('img').attr('src', imageSrc);
    });
    $(window).load(function() {
      // After image has been fully loaded
      imagesLoaded( $('img'), function() {     
        set_body_height();
        setup_canvas(clickablesArray);
        clickablesArray = draw_clickables(dataStore);
        $('img').show();     
      });
    });
  </script>
  
</head>
<body>
  <div id="pic-container">
    <img src="" alt="The first" class="center fit" style="display: none;"></img>
  </div>
</body>
</html>